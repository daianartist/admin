{% extends "base.html" %}
{% block title %}–î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞{% endblock %}

{% block extra_head %}
<!-- –ü–æ–¥–∫–ª—é—á–∏—Ç–µ jQuery –∏ jQuery Input Mask -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/5.0.7/jquery.inputmask.min.js"></script>
{% endblock %}

{% block content %}
<div class="container-fluid">
  <h2>–î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</h2>
  
<form action="{{ url_for('add_employee') }}" method="POST">
  <div class="row">
    <div class="col-md-6 mb-3">
      <label for="firstName" class="form-label">–ò–º—è</label>
      <input type="text" class="form-control" id="firstName" name="firstName" required>
    </div>
    <div class="col-md-6 mb-3">
      <label for="phone" class="form-label">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</label>
      <input type="text" class="form-control" id="phone" name="phone" required>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6 mb-3">
      <label for="lastName" class="form-label">–§–∞–º–∏–ª–∏—è</label>
      <input type="text" class="form-control" id="lastName" name="lastName" required>
    </div>
    <div class="col-md-6 mb-3">
      <label for="password" class="form-label">–ü–∞—Ä–æ–ª—å</label>
      <div class="input-group">
        <!-- –ü–æ–ª–µ –≤–≤–æ–¥–∞ –ø–∞—Ä–æ–ª—è -->
        <input type="password" class="form-control" id="password" name="password" required>
    
        <!-- –ö–Ω–æ–ø–∫–∞ "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å" -->
        <button class="btn btn-outline-secondary" type="button" onclick="generatePassword()">
          –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å
        </button>
        
        <!-- –ö–Ω–æ–ø–∫–∞/–≥–ª–∞–∑–æ–∫ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è/—Å–∫—Ä—ã—Ç–∏—è –ø–∞—Ä–æ–ª—è -->
        <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility()">
          <span id="passwordEyeIcon">üëÅÔ∏è</span>
        </button>
      </div>
    </div>    
  </div>
  <div class="row">
    <div class="col-md-6 mb-3">
      <label for="patronymic" class="form-label">–û—Ç—á–µ—Å—Ç–≤–æ</label>
      <input type="text" class="form-control" id="patronymic" name="patronymic">
    </div>
    <!--
    <div class="col-md-6 mb-3">
      <label for="uin" class="form-label">–ò–ò–ù</label>
      <input type="text" class="form-control" id="uin" name="uin" required>
    </div>
  -->
  </div>
  <div class="row">
    <div class="col-md-6 mb-3">
      <label for="role" class="form-label">–†–æ–ª—å</label>
      <select id="role" name="role" class="form-select" required>
        {% for role in roles %}
        <option value="{{ role['role_name'] }}">{{ role['role_name'] }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="col-md-6 mb-3">
      <label for="subject" class="form-label">–ü—Ä–µ–¥–º–µ—Ç</label>
      <select id="subject" name="subject" class="form-select" required>
        {% for subject in subjects %}
        <option value="{{ subject['subject_id'] }}">{{ subject['subject_name'] }}</option>
        {% endfor %}
      </select>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6 mb-3">
      <label for="groups" class="form-label">–ì—Ä—É–ø–ø—ã</label>
      <select id="groups" name="groups" class="form-select" multiple>
        {% for group in groups %}
        <option value="{{ group['group_id'] }}">{{ group['group_name'] }}</option>
        {% endfor %}
      </select>
    </div>
  </div>
  <button type="submit" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å</button>
</form>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
  // –ú–∞—Å–∫–∞ –¥–ª—è –≤–≤–æ–¥–∞ –ò–ò–ù
  $(document).ready(function(){
    $('#uin').inputmask("999999999999");
  });
</script>
<script>
  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ 6-–∑–Ω–∞—á–Ω–æ–≥–æ —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ –ø–∞—Ä–æ–ª—è
  function generatePassword() {
    let pass = '';
    for (let i = 0; i < 6; i++) {
      pass += Math.floor(Math.random() * 10);
    }
    document.getElementById('password').value = pass;
  }

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è/—Å–∫—Ä—ã—Ç–∏—è –ø–∞—Ä–æ–ª—è
  function togglePasswordVisibility() {
    const passwordInput = document.getElementById('password');
    const eyeIcon = document.getElementById('passwordEyeIcon');
    
    if (passwordInput.type === 'password') {
      // –ú–µ–Ω—è–µ–º –Ω–∞ —Ç–∏–ø "text", —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å —Å–∏–º–≤–æ–ª—ã
      passwordInput.type = 'text';
      // –ú–æ–∂–Ω–æ —Ç–∞–∫–∂–µ —Å–º–µ–Ω–∏—Ç—å —Å–∞–º —Å–∏–º–≤–æ–ª –∏–ª–∏ –∫–ª–∞—Å—Å –∏–∫–æ–Ω–∫–∏
      eyeIcon.textContent = 'üôà';  // –º–µ–Ω—è–µ–º –∑–Ω–∞—á–æ–∫ –Ω–∞ "–∑–∞–∫—Ä—ã—Ç—ã–π –≥–ª–∞–∑"
    } else {
      // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–∏–ø "password", —á—Ç–æ–±—ã —Å–∫—Ä—ã—Ç—å
      passwordInput.type = 'password';
      // –°–Ω–æ–≤–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∏–∫–æ–Ω–∫—É "–≥–ª–∞–∑"
      eyeIcon.textContent = 'üëÅÔ∏è';
    }
  }
</script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/5.0.7/jquery.inputmask.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js"></script>
{% endblock %}
